{"version":3,"sources":["js/11-copy-to-clipboard.js"],"names":["$","document","ready","on","event","target","currentTarget","append","css","top","offset","right","window","width","left","outerWidth","stop","fadeIn","x","clientX","y","clientY","scrollTop","copy_button_top","copy_button_left","copy_button_bottom","outerHeight","copy_button_right","remove","fadeOut","preventDefault","callback","clipboardData","setData","innerText","temp","position","text","clone","find","prepend","end","trim","trigger","execCommand","alert","copy_element_to_clipboard","delay","hide"],"mappings":"AAWAA,EAAEC,UAAUC,MAAM,WAEdF,EAAE,OAAOG,GAAG,aAAc,SAASC,GAC/BC,OAASL,EAAEI,EAAME,eACjBN,EAAE,QAAQO,OAAO,oLACjBP,EAAE,sBAAsBQ,IAAI,CACxBC,IAAKJ,OAAOK,SAASD,IAAM,EAC3BE,MAAOX,EAAEY,QAAQC,SAAWR,OAAOK,SAASI,KAAOT,OAAOU,cAAgB,IAC3EC,OAAOC,WAEXd,GAAG,aAAc,SAASC,GACzB,IAAIc,EAAId,EAAMe,QACVC,EAAIhB,EAAMiB,QAAUrB,EAAEY,QAAQU,YAC9BC,EAAkBvB,EAAE,sBAAsBU,SAASD,IACnDe,EAAmBxB,EAAE,sBAAsBU,SAASI,KACpDW,EAAqBF,EAAkBvB,EAAE,sBAAsB0B,cAC/DC,EAAoB3B,EAAE,sBAAsBU,SAASI,KAAOd,EAAE,sBAAsBe,aAE/ES,EAAJN,GACEA,EAAIS,GACAJ,EAAJH,GACAA,EAAIK,IACPzB,EAAE,wBAAwB4B,SAC1B5B,EAAE,sBAAsB4B,SACxB5B,EAAE,sBAAsBgB,OAAOa,aAMvC7B,EAAEC,UAAUE,GAAG,QAAS,qBAAsB,SAASC,GACnDA,EAAM0B,iBAcV,SAAmCzB,EAAQ0B,GAEvC,GAAGnB,OAAOoB,cACNpB,OAAOoB,cAAcC,QAAQ,OAAQ5B,EAAO6B,eAE5C,CACA,IAAIC,EAAOnC,EAAE,cACbmC,EAAK3B,IAAI,CACL4B,SAAU,WACVtB,KAAU,UACVL,IAAU,YAKd,IAAI4B,EAAOrC,EAAEK,GAAQiC,QAAQC,KAAK,MAAMC,QAAQ,QAAQC,MAAMJ,OAAOK,OACrEP,EAAKE,KAAKA,GACVrC,EAAE,QAAQO,OAAO4B,GACjBA,EAAKQ,QAAQ,UAGV1C,SAAS2C,YAAY,QACpBb,IAEAc,MAAM,2CAA6CxC,EAAO6B,WAE9DC,EAAKP,UAtCTkB,CAA0BzC,OAAQ,WAC9BL,EAAE,wBAAwBQ,IAAI,CAC1BC,IAAKJ,OAAOK,SAASD,IAAM,GAC3BE,MAAOX,EAAEY,QAAQC,SAAWR,OAAOK,SAASI,KAAOT,OAAOU,cAAgB,IAC3EC,OAAOC,SAAS8B,MAAM,MAAMlB,cAsCvC7B,EAAEY,QAAQT,GAAG,SAAU,WACnBH,EAAE,sBAAsBgD,OACxBhD,EAAE,wBAAwBgD","file":"js/11-copy-to-clipboard.js","sourcesContent":["/*******************************************************************************\n * Copyright (c) 2020 IBM Corporation and others.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     IBM Corporation - initial API and implementation\n *******************************************************************************/\n\n$(document).ready(function () {\n    // Show copy to clipboard button when mouse enters code block\n    $('pre').on('mouseenter', function(event) {\n        target = $(event.currentTarget);\n        $('main').append('<div id=\"copied_confirmation\">Copied to clipboard</div><img id=\"copy_to_clipboard\" src=\"../../../../_/img/guides_copy_button.svg\" alt=\"Copy code block\" title=\"Copy code block\">');\n        $('#copy_to_clipboard').css({\n            top: target.offset().top + 1,\n            right: $(window).width() - (target.offset().left + target.outerWidth()) + 1\n        }).stop().fadeIn();\n    // Hide copy to clipboard button when mouse leaves code block (unless mouse enters copy to clipboard button)\n    }).on('mouseleave', function(event) {\n        var x = event.clientX;\n        var y = event.clientY + $(window).scrollTop();\n        var copy_button_top = $('#copy_to_clipboard').offset().top;\n        var copy_button_left = $('#copy_to_clipboard').offset().left;\n        var copy_button_bottom = copy_button_top + $('#copy_to_clipboard').outerHeight();\n        var copy_button_right = $('#copy_to_clipboard').offset().left + $('#copy_to_clipboard').outerWidth();\n        \n        if(!(x > copy_button_left\n            && x < copy_button_right\t\n            && y > copy_button_top\t\n            && y < copy_button_bottom)) {\n            $('#copied_confirmation').remove();\n            $('#copy_to_clipboard').remove();\n            $('#copy_to_clipboard').stop().fadeOut();\n        }\n\n    });\n\n    // Copy target element and show copied confirmation when copy to clipboard button clicked\n    $(document).on(\"click\", \"#copy_to_clipboard\", function(event) {\n        event.preventDefault();\n        // Target was assigned while hovering over the element to copy.\n        copy_element_to_clipboard(target, function(){\n            $('#copied_confirmation').css({\t\n                top: target.offset().top - 15,\n                right: $(window).width() - (target.offset().left + target.outerWidth()) + 1\n            }).stop().fadeIn().delay(3500).fadeOut();\n        });\t\n    });\n\n    /* Copy the target element to the clipboard\n    target: element to copy\n    callback: function to run if the copy is successful\n    */\n    function copy_element_to_clipboard(target, callback){\n        // IE\n        if(window.clipboardData){\n            window.clipboardData.setData(\"Text\", target.innerText);\n        } \n        else{\n            var temp = $('<textarea>');\n            temp.css({\n                position: \"absolute\",\n                left:     \"-1000px\",\n                top:      \"-1000px\",\n            });       \n            \n            // Create a temporary element for copying the text.\n            // Prepend <br> with newlines because jQuery .text() strips the <br>'s and we use .text() because we don't want all of the html tags copied to the clipboard.\n            var text = $(target).clone().find('br').prepend('\\r\\n').end().text().trim();\n            temp.text(text);\n            $(\"body\").append(temp);\n            temp.trigger('select');\n            \n            // Try to copy the selection and if it fails display a popup to copy manually.\n            if(document.execCommand('copy')) { \n                callback();\n            } else {\n                alert('Copy failed. Copy the command manually: ' + target.innerText);\n            }\n            temp.remove(); // Remove temporary element.\n        }\n    }\n\n    $(window).on('resize', function(){\n        $('#copy_to_clipboard').hide();\n        $('#copied_confirmation').hide();\n    });\n});"]}