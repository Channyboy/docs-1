{"version":3,"sources":["js/01-nav.js"],"names":["navigation","activateCurrentPath","navItem","ancestorClasses","ancestor","parentNode","classList","contains","tagName","add","toggleActive","this","toggle","handlePageClick","e","concealEvent","$","target","length","closeVersionPicker","hasClass","toggleClass","showNav","navToggle","document","querySelector","navContainer","hideNav","html","documentElement","addEventListener","remove","removeEventListener","stopPropagation","scrollItemToMidpoint","el","nav","panel","rect","getBoundingClientRect","effectiveHeight","height","navStyle","window","getComputedStyle","position","top","parseFloat","scrollTop","Math","max","offsetTop","on","location","href","find","click","init","menuPanel","currentPageItem","from","selector","slice","call","querySelectorAll","forEach","btn","li","parentElement","bind","navItemSpan","nextElementSibling","nextSibling","nodeType","matches","findNextElement","style","cursor","addClass","css","currentPanel","activatePanel","dataset","which","detail","preventDefault"],"mappings":"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","file":"js/01-nav.js","sourcesContent":["var navigation = (function(){\n  'use strict';\n  var init = function(){\n    var navContainer = document.querySelector('.nav-container');\n    var navToggle = document.querySelector('.nav-toggle');\n\n    if (!navContainer) return;\n\n    navToggle.addEventListener('click', showNav);\n    navContainer.addEventListener('click', handlePageClick);\n\n    var menuPanel = navContainer.querySelector('[data-panel=menu]');\n    if (!menuPanel) return;\n\n    var currentPageItem = menuPanel.querySelector('.is-current-page');\n    if (currentPageItem) {\n      activateCurrentPath(currentPageItem);\n      scrollItemToMidpoint(currentPageItem.querySelector('.nav-link'));\n    } else {\n      menuPanel.scrollTop = 0;\n    }\n\n    find(menuPanel, '.nav-item-toggle').forEach(function (btn) {\n      var li = btn.parentElement;\n      btn.addEventListener('click', toggleActive.bind(li));\n      var navItemSpan = findNextElement(btn, '.nav-text');\n      if (navItemSpan) {\n        navItemSpan.style.cursor = 'pointer';\n        navItemSpan.addEventListener('click', toggleActive.bind(li));\n      }\n    });\n\n    if($('.components .version').length === 1){\n      $('.nav-panel-explore .context .version').addClass('hide-after');\n      $('.nav-panel-explore .context').css('pointer-events', 'none');\n    }\n\n    document.querySelector('.nav-container .nav .context').addEventListener('click', function () {\n      var currentPanel = document.querySelector('.nav .is-active[data-panel]');\n      var activatePanel = currentPanel.dataset.panel === 'menu' ? 'explore' : 'menu';\t\n      currentPanel.classList.toggle('is-active');\n      document.querySelector('.nav [data-panel=' + activatePanel + ']').classList.toggle('is-active');\n    });\n\n    document.addEventListener('click', handlePageClick);\n\n    $('.nav-menu > .nav-list').on('scroll', function(e){\n      concealEvent(e);\n    });\n\n    document.addEventListener('keydown', function(e){\n        if(e.which === 27){\n          closeVersionPicker();\n        }\n    });\n\n    // NOTE prevent text from being selected by double click\n    menuPanel.addEventListener('mousedown', function (e) {\n      if (e.detail > 1) e.preventDefault();\n    });\n\n    // Expand all first level doc categories\n    $(\".nav-menu > .nav-list > .nav-item\").addClass('is-active')\n\n  };  \n\n  $('.components .versions li a').on('click', function(e){\n    e.stopPropagation();\n    location.href = $(this)[0].href;\n    closeVersionPicker();\n  });\n\n  $('.components .versions li').on('click', function(e) {\n    e.stopPropagation();\n    var li = $(this);\n    var anchor = li.find('a');\n    anchor.click();\n  });\n\n  function find (from, selector) {\n    return [].slice.call(from.querySelectorAll(selector))\n  }\n\n  function findNextElement (from, selector) {\n    var el;\n    if ('nextElementSibling' in from) {\n      el = from.nextElementSibling;\n    } else {\n      el = from;\n      while ((el = el.nextSibling) && el.nodeType !== 1);\n    }\n    return el && selector ? el[el.matches ? 'matches' : 'msMatchesSelector'](selector) && el : el;\n  }\n\n  function activateCurrentPath (navItem) {\n    var ancestorClasses;\n    var ancestor = navItem.parentNode;\n    while (!(ancestorClasses = ancestor.classList).contains('nav-menu')) {\n      if (ancestor.tagName === 'LI' && ancestorClasses.contains('nav-item')) {\n        ancestorClasses.add('is-active', 'is-current-path');\n      }\n      ancestor = ancestor.parentNode;\n    }\n    navItem.classList.add('is-active', 'is-current-page');\n  }\n\n  function toggleActive () {\n    this.classList.toggle('is-active');\n  }\n\n  // Detect if the version switcher is open to close it when clicking somewhere else.\n  function handlePageClick (e) {\n    concealEvent(e);\n    if($('.context')[0].contains(e.target)){\n      return;\n    }\n    if($('.components:visible').length > 0){\n      if(!$('.components')[0].contains(e.target)){\n        closeVersionPicker();\n      }\n    }\n  }\n  \n  \n  function closeVersionPicker (e) {\n    if($('.nav-panel-explore').hasClass('is-active')){\n      $('.nav-panel-explore').toggleClass('is-active');\n      $('.nav-panel-menu').toggleClass('is-active'); // Change active panel to the nav menu\n    }    \n  }\n\n  function showNav (e) {\n    var navToggle = document.querySelector('.nav-toggle');\n    var navContainer = document.querySelector('.nav-container');\n    if (navToggle.classList.contains('is-active')) return hideNav(e)\n    var html = document.documentElement;\n    html.classList.add('is-clipped--nav');\n    navToggle.classList.add('is-active');\n    navContainer.classList.add('is-active');\n    html.addEventListener('click', hideNav);\n    concealEvent(e);\n  }\n\n  function hideNav (e) {\n    var navToggle = document.querySelector('.nav-toggle');\n    var navContainer = document.querySelector('.nav-container');\n    var html = document.documentElement;\n    html.classList.remove('is-clipped--nav');\n    navToggle.classList.remove('is-active');\n    navContainer.classList.remove('is-active');\n    html.removeEventListener('click', hideNav);\n    concealEvent(e);\n  }\n\n  // NOTE don't let event get picked up by window click listener\n  function concealEvent (e) {\n    e.stopPropagation();\n  }\n\n  function scrollItemToMidpoint (el) {\n    var nav = document.querySelector('.nav-container nav');\n    var panel = document.querySelector('.nav-container [data-panel=menu]');\n    var rect = panel.getBoundingClientRect();\n    var effectiveHeight = rect.height;\n    var navStyle = window.getComputedStyle(nav);\n    if (navStyle.position === 'sticky') effectiveHeight -= rect.top - parseFloat(navStyle.top);\n    panel.scrollTop = Math.max(0, (el.getBoundingClientRect().height - effectiveHeight) * 0.5 + el.offsetTop);\n  }\n\n  return {\n    init: init,\n    activateCurrentPath: activateCurrentPath,\n    scrollItemToMidpoint: scrollItemToMidpoint\n  };\n})();\nnavigation.init();\n"]}