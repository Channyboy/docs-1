// Copyright (c) 2021 IBM Corporation and others.
// Licensed under Creative Commons Attribution-NoDerivatives
// 4.0 International (CC BY-ND 4.0)
//   https://creativecommons.org/licenses/by-nd/4.0/
//
// Contributors:
//     IBM Corporation
//
:page-description:
:seo-title: Manage Open Liberty from a web browser with the Admin Center GUI
:page-layout: general-reference
:page-type: general
= Open ID Connect Admin Center tools

== OpenID Connect Client Management Tool

This tool is used to add, modify, and delete an OAuth client and to regenerate a client secret on an OpenID Connect provider.

Enable the use of this tool through the Admin Center by configuring the server.xml to include the following:

Both adminCenter-1.0 and openidConnectServer-1.0 are listed as the features.

The AdminCenter login user must have the clientManager role to access this tool.


<administrator-role>
      admin
</administrator-role>
<oauth-roles>
   <clientManager>
      <user name="admin" />
   </clientManager>
</oauth-roles>
See xxxxx (should provide a link here to point to the security doc talking about clientManager role and the registration API tool).

The invalidateOnUnauthorizedSessionRequestException attribute is set for httpSession.

<httpSession invalidateOnUnauthorizedSessionRequestException="true" />

If there are existing clients on the provider belonging to the login user, the tool displays a list of existing clients. The table rows are unsorted. Click the Name column header to sort the table rows in ascending or descending order. Alternatively, use the filter box to look for clients with matching client name.

image::oidccmt.png[screen capture of the OIDC Client Management Tool,align="center"]

Use the Add New button to bring up the "Register New OAuth Client" dialog to add a new client. All fields on the dialog are optional. Some fields in the dialog are populated with the default values. Change the values as needed. Click the Register button to create a new client and to copy the client ID and secret in the "OAuth Registration Saved" dialog. Click the Done button to dismiss the dialog.

Click Edit on the table row to bring up the "Edit OAuth Client" dialog to change an existing client. Update the client field values as needed. Click the Update button to save the changes. To generate a new client secret, blank out the value of the Client secret field and click the Update button. The "OAuth Registration Updated" dialog appears with the regenerated client secret. You can copy the new client secret by clicking on the copy icon. Click the Done button to dismiss the dialog.

Click Delete on the table row to bring up the delete confirmation dialog. Click the Delete button in the dialog to confirm the delete.

== OpenID Connect Personal Token Management Tool

This tool allows a user to create, delete, and regenerate app-passwords and app-tokens on an OpenID Connect provider.

Enable the use of this tool through the Admin Center by configuring the server.xml to include the following:

Both adminCenter-1.0 and openidConnectServer-1.0 are listed as the features.

The invalidateOnUnauthorizedSessionRequestException attribute is set for httpSession.

<httpSession invalidateOnUnauthorizedSessionRequestException="true" />

Configure an OAuth provider to set the internalClientId and internalClientSecret attributes to the ID and secret of an OAuth client which is configured to allow the use of app-passwords and/or app-tokens. See Configuring and Using an OpenId Connect Provider to use Application Passwords, Configuring and Using an OpenId Connect Provider to use Application Tokens, and web pages for users and administrators (these three links should point to the doc pointed by Bruce).

The tool displays a list of existing app-passwords and app-tokens on an OpenID Connect provider belonging to the logged in user. The table rows are unsorted. Click the Name column header to sort the table rows in ascending or descending order.

image::oidcptmt.pngimage::oidcptmt.png[screen capture of the OIDC Personal Token Management Tool,align="center"]


If the OAuth client provided in this OAuth provider in the server.xml is defined to allow the use of app-passwords or app-tokens, the Add New button is enabled. Use the Add New button to bring up the "Register New Authentication" dialog. Provide a name and select an authentication type. Click the Generate button. The dialog will be updated with the newly generated app-password or app-token. Click the copy icon to copy it. Click the Done button to dismiss the dialog.

If the OAuth client provided in this OAuth provider in server.xml is defined to allow the use of app-passwords and/or app-tokens, Regenerate is enabled on the table row for the allowed authentication type. Click Regenerate on the table row to bring up the "Regenerate App-Password" or "Regenerate App-Token" dialog. Click the Generate button to regenerate the authentication. The dialog will be updated with the newly generated app-password or app-token. Click the copy icon to copy it. Click the Done button to dismiss the dialog.

Click Delete on the table row to bring up the delete confirmation dialog. Click the Delete button in the dialog to confirm the delete.

== OpenID Connect Users Token Management Tool

This tool is used to revoke app-passwords and app-tokens of other users on an OpenID Connect provider.

Enable the use of this tool through the Admin Center by configuring the server.xml to include the following:

Both adminCenter-1.0 and openidConnectServer-1.0 are listed as the features.

The AdminCenter login user must have the tokenManager role to access this tool.

<administrator-role>
      admin
</administrator-role>
<oauth-roles>
   <tokenManager>
      <user name="admin" />
   </tokenManager>
</oauth-roles>
See xxxxx (should provide a link here to point to the security doc talking about tokenManager role if there is one).

The invalidateOnUnauthorizedSessionRequestException attribute is set for httpSession.

<httpSession invalidateOnUnauthorizedSessionRequestException="true" />

Configure an OAuth provider to set the internalClientId and internalClientSecret to the ID and secret of an OAuth client which is setup to allow the use of app-passwords and/or app-tokens. See Configuring and Using an OpenId Connect Provider to use Application Passwords, Configuring and Using an OpenId Connect Provider to use Application Tokens, and web pages for users and administrators (these three links should point to the doc pointed by Bruce).

Once you are in the tool, enter a user name in the search field and hit "Enter" to get a list of app-passwords and app-tokens for the specified user. The table rows are unsorted. Click the Name column header to sort the table rows in ascending or descending order.

image::oidcutmt.png[screen capture of the OIDC User Token Management Tool,align="center"]

If the user has existing app-passwords and app-tokens, the authentication could be revoked in one of the three ways:

Click Delete at the end of each table row to delete a specific app-password or app-token.
Click the "checkbox" at the beginning of the table header next to the Name column to select all app-passwords and app-tokens for the specified user for deletion. The table summary is updated to show the number of items selected. Click the Delete button in the table summary header.
Individually click the "checkbox" at the beginning of each table row for the authentications that should be revoked. Click as many "checkboxes" that apply. The table summary is updated to show the number of items selected. Click the Delete button in the table summary header to delete the selected app-password or app-token authentications.
A delete confirmation dialog will appear. Click the Delete button to confirm the action.

== See also
